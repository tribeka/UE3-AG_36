<?xml version="1.0" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xml:lang="de" lang="de"
      xmlns:f="http://java.sun.com/jsf/core">
    <h:body>
        <ui:composition template="./Template.xhtml">
            <ui:define name="title">
                EWA Mensch &auml;rgere Dich nicht :: Spiel
            </ui:define>
            <ui:define name="accessibilitymenu">
                <li><a href="#navigation" accesskey="2">Navigation</a></li>
                <li><a href="#board" accesskey="0">Spielbrett</a></li>
                <li><a href="#dicearea" accesskey="1">W&uuml;rfel</a></li>
                <li><a href="#info_area" accesskey="3">Spielstand</a></li>
            </ui:define>

            <ui:define name="menu">
                <li><a href="#">Userdaten &auml;ndern</a></li>
                <li><a href="#">Zur&uuml;ck zur Lounge</a></li>
                <li><a href="#">Ausloggen</a></li>
            </ui:define>

            <ui:define name="content">
                <h:panelGroup id="info_area" layout="block">
                    <h2>Spielinformationen</h2>
                    <table class="game_info" summary="Diese Tabelle zeigt Informationen zum aktuellen Spiel">
                        <tbody>
                            <tr class="accessibility">
                                <th>Information</th>
                                <th>Wert</th>
                            </tr>
                            <tr>
                                <th>Anzahl Spieler</th>
                                <td><h:outputText value="#{game.playersCnt}" /></td>
                            </tr>
                            <tr>
                                <th>F&uuml;hrender</th>
                                <td><h:outputText value="#{game.leader}" /></td>
                            </tr>
                            <tr>
                                <th>Aktuelle Runde</th>
                                <td><h:outputText value="#{game.round}" /></td>
                            </tr>
                            <tr>
                                <th>Zeit</th>
                                <td><h:outputText value="#{game.spentTimeFormat}" /></td>
                            </tr>
                        </tbody>
                    </table>
                    <h2>Spieler</h2>
                    <table class="game_info" summary="Diese Tabelle listet die Namen der Spieler auf">
                        <tbody>
                            <tr class="accessibility">
                                <th>Spielernummer</th>
                                <th>Spielername</th>
                            </tr>

                            <ui:repeat value="#{game.players}" var="plr" varStatus="status">
                                <tr>
                                    <th><h:outputText value="Spieler #{status.index +1}" /></th>
                                    <td><h:outputText value="#{plr.name}" /></td>
                                </tr>
                            </ui:repeat>
                        </tbody>
                    </table>
                </h:panelGroup>
                <div id="dicearea">
                    <hr class="accessibility" />
                    <h2 class="accessibility">W&uuml;rfel</h2>
                    <span title='aktueller Spieler'><h:outputText id="test12" value="#{game.currentPlayer.name}" /></span>
                    <h:form id="diceform">
                        <h:commandButton id="rolldice" action="#{game.rollDice}"
                                         image="#{game.currentPlayer.diceScoreImg}" alt="#{game.currentPlayer.diceScoreText}"
                                         title="#{game.currentPlayer.diceScoreText}">
                            <f:ajax render=":play_area"/>
                            <f:ajax render="diceform"/>
                            <f:ajax render=":info_area"/>
                        </h:commandButton>
                    </h:form>
                </div>
                <h:panelGroup layout="block" id="play_area">
                    <hr class="accessibility" />
                    <div id="board">
                        <h2 class="accessibility">Spielbrett</h2>
                        <div class="fields">
                            <h3 class="accessibility">Spielfelder</h3>
                            <ol title="Spielfelder">
                                <c:forEach items="#{game.boardFields}" var="field"
                                           begin="0" end="39">
                                    <li><img id="field#{field.index}"
                                            src="#{field.img}#{field.occupyingPlayerImage}.png"
                                            alt="#{field.text}#{field.occupyingPlayerText}"
                                            title="#{field.text}#{field.occupyingPlayerText}"/>
                                    </li>
                                </c:forEach>
                            </ol>
                            <h3 class="accessibility">Starth&auml;user</h3>
                            <ol title="Starthaus Spieler 1">
                                <c:forEach items="#{game.boardFields}" var="field"
                                           begin="40" end="43">
                                    <li><img id="field#{field.index}"
                                            src="#{field.img}#{field.occupyingPlayerImage}.png"
                                            alt="#{field.text}#{field.occupyingPlayerText}"
                                            title="#{field.text}#{field.occupyingPlayerText}"/>
                                    </li>
                                </c:forEach>
                            </ol>
                            <ol title="Starthaus Spieler 2">
                                <c:forEach items="#{game.boardFields}" var="field"
                                           begin="44" end="47">
                                    <li><img id="field#{field.index}"
                                            src="#{field.img}#{field.occupyingPlayerImage}.png"
                                            alt="#{field.text}#{field.occupyingPlayerText}"
                                            title="#{field.text}#{field.occupyingPlayerText}"/>
                                    </li>
                                </c:forEach>
                            </ol>
                            <ol title="Starthaus Spieler 3">
                                <c:forEach items="#{game.boardFields}" var="field"
                                           begin="48" end="51">
                                    <li><img id="field#{field.index}"
                                            src="#{field.img}#{field.occupyingPlayerImage}.png"
                                            alt="#{field.text}#{field.occupyingPlayerText}"
                                            title="#{field.text}#{field.occupyingPlayerText}"/>
                                    </li>
                                </c:forEach>
                            </ol>
                            <ol title="Starthaus Spieler 4">
                                <c:forEach items="#{game.boardFields}" var="field"
                                           begin="52" end="55">
                                    <li><img id="field#{field.index}"
                                            src="#{field.img}#{field.occupyingPlayerImage}.png"
                                            alt="#{field.text}#{field.occupyingPlayerText}"
                                            title="#{field.text}#{field.occupyingPlayerText}"/>
                                    </li>
                                </c:forEach>
                            </ol>
                            <h3 class="accessibility">Zielh&auml;user</h3>
                            <ol title="Zielhaus Spieler 1">
                                <c:forEach items="#{game.boardFields}" var="field"
                                           begin="56" end="59">
                                    <li><img id="field#{field.index}"
                                            src="#{field.img}#{field.occupyingPlayerImage}.png"
                                            alt="#{field.text}#{field.occupyingPlayerText}"
                                            title="#{field.text}#{field.occupyingPlayerText}"/>
                                    </li>
                                </c:forEach> 
                            </ol>
                            <ol title="Zielhaus Spieler 2">
                                <c:forEach items="#{game.boardFields}" var="field"
                                           begin="60" end="63">
                                    <li><img id="field#{field.index}"
                                            src="#{field.img}#{field.occupyingPlayerImage}.png"
                                            alt="#{field.text}#{field.occupyingPlayerText}"
                                            title="#{field.text}#{field.occupyingPlayerText}"/>
                                    </li>
                                </c:forEach> 
                            </ol>
                            <ol title="Zielhaus Spieler 3">
                                <c:forEach items="#{game.boardFields}" var="field"
                                           begin="64" end="67">
                                    <li><img id="field#{field.index}"
                                            src="#{field.img}#{field.occupyingPlayerImage}.png"
                                            alt="#{field.text}#{field.occupyingPlayerText}"
                                            title="#{field.text}#{field.occupyingPlayerText}"/>
                                    </li>
                                </c:forEach> 
                            </ol>
                            <ol title="Zielhaus Spieler 4">
                                <c:forEach items="#{game.boardFields}" var="field"
                                           begin="68" end="71">
                                    <li><img id="field#{field.index}"
                                            src="#{field.img}#{field.occupyingPlayerImage}.png"
                                            alt="#{field.text}#{field.occupyingPlayerText}"
                                            title="#{field.text}#{field.occupyingPlayerText}"/>
                                    </li>
                                </c:forEach> 
                            </ol>
                        </div>
                        <div class="clearer"></div>  
                        <h:panelGroup layout="block" id="infogegner" rendered="#{game.opponentScore}">
                            W&uuml;rfelergebnis Computer: 
                            <ui:repeat var="score" value="#{game.opponentScore}">
                                <h:outputText vale="#{score} "/>
                            </ui:repeat>
                        </h:panelGroup>
                    </div>
                </h:panelGroup>	
            </ui:define>
        </ui:composition>

    </h:body>
</html>                           